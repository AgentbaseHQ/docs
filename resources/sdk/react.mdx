---
title: "React SDK"
description: "React hooks for building conversational AI interfaces with Agentbase. Simple, powerful, and focused."
icon: "react"
---

> React hooks for building conversational AI interfaces with Agentbase. Simple, powerful, and focused.

## Features

- **Simple API** - Clean hook with just what you need: send, stop, clear
- **Streaming Support** - Real-time streaming of agent responses  
- **Multi-Agent Flows** - Support for agent handoffs and transfers
- **Session Management** - Automatic session tracking across conversations
- **TypeScript** - Full TypeScript support with type definitions
- **Server-Side** - Keep your API keys secure on the server

## Installation

```bash
npm install @agentbase-sdk/react agentbase-sdk
```

## Quick Start

### 1. Create a Server-Side API Route

The React SDK calls a server-side endpoint to keep your Agentbase API key secure. Here's an example using Next.js App Router:

```typescript
// app/api/agent/route.ts
import Agentbase from "agentbase-sdk";
import { NextRequest } from "next/server";

// Initialize Agentbase client (reuse across requests)
const agentbase = new Agentbase({
  apiKey: process.env.AGENTBASE_API_KEY!,
});

export const runtime = "edge"; // Optional: Use Edge Runtime for better performance

export async function POST(req: NextRequest) {
  try {
    // Parse request body
    const body = await req.json();
    const {
      message,
      session,
      system,
      mode = "base",
      rules,
      mcpServers,
      agents,
      streamingTokens = false,
    } = body;

    // Validate required fields
    if (!message) {
      return new Response("Message is required", { status: 400 });
    }

    // Prepare Agentbase parameters
    const params: any = {
      message,
      mode,
      streamingTokens,
    };

    if (session) params.session = session;
    if (system) params.system = system;
    if (rules) params.rules = rules;
    if (mcpServers) params.mcp_servers = mcpServers;
    if (agents) params.agents = agents;

    // Create a TransformStream to convert async iterator to ReadableStream
    const encoder = new TextEncoder();
    const stream = new TransformStream();
    const writer = stream.writable.getWriter();

    // Start streaming in the background
    (async () => {
      try {
        const responseStream = await agentbase.runAgent(params);

        for await (const response of responseStream) {
          // Format as Server-Sent Events
          const data = `data: ${JSON.stringify(response)}\n\n`;
          await writer.write(encoder.encode(data));
        }

        await writer.close();
      } catch (error) {
        console.error("Streaming error:", error);
        await writer.abort(error);
      }
    })();

    // Return the stream as SSE
    return new Response(stream.readable, {
      headers: {
        "Content-Type": "text/event-stream",
        "Cache-Control": "no-cache",
        Connection: "keep-alive",
      },
    });
  } catch (error) {
    console.error("Chat API error:", error);
    return new Response("Internal server error", { status: 500 });
  }
}
```

### 2. Use the useAgent Hook in Your Component

```jsx
"use client";

import { useAgent } from "@agentbase-sdk/react";
import { useState } from "react";

export default function Chat() {
  const [input, setInput] = useState("");
  const { messages, send, stop, clear, isRunning, error, session } = useAgent({
    api: "/api/agent",
    system: "You are a helpful AI assistant. Be concise and friendly.",
    mode: "base",
    onError: (error) => {
      console.error("Agent error:", error);
    },
  });

  const handleSubmit = (e) => {
    e.preventDefault();
    if (!input.trim() || isRunning) return;

    send(input);
    setInput("");
  };

  return (
    <div>
      {/* Session Info */}
      {session && <div>Session: {session.substring(0, 8)}...</div>}

      {/* Error Display */}
      {error && <div>Error: {error.message}</div>}

      {/* Messages */}
      <div>
        {messages.map((message, msgIndex) => (
          <div key={msgIndex}>
            <strong>{message.role === "user" ? "You" : "Assistant"}:</strong>

            {/* Render all content items */}
            {message.content.map((item, index) => (
              <div key={index}>
                {item.type === "text" && (
                  <div>{item.text}</div>
                )}
                {item.type === "thinking" && (
                  <div style={{ fontStyle: "italic", opacity: 0.7 }}>
                    ðŸ’­ {item.text}
                  </div>
                )}
                {item.type === "tool_use" && (
                  <div>
                    <strong>ðŸ”§ Tool Use:</strong>
                    <pre>{item.text}</pre>
                  </div>
                )}
                {item.type === "tool_response" && (
                  <div>
                    <strong>âœ… Tool Result:</strong>
                    <pre>{item.text}</pre>
                  </div>
                )}
                {item.type === "transfer" && (
                  <div>
                    ðŸ”„ Transferred to: {item.agent}
                    {item.context && <div>{item.context}</div>}
                  </div>
                )}
              </div>
            ))}
          </div>
        ))}

        {/* Loading indicator */}
        {isRunning && <div>...</div>}
      </div>

      {/* Controls */}
      <button onClick={clear} disabled={messages.length === 0}>
        Clear
      </button>

      {/* Input Form */}
      <form onSubmit={handleSubmit}>
        <input
          value={input}
          onChange={(e) => setInput(e.target.value)}
          placeholder="Type your message..."
          disabled={isRunning}
        />
        {isRunning ? (
          <button type="button" onClick={stop}>
            Stop
          </button>
        ) : (
          <button type="submit" disabled={!input.trim()}>
            Send
          </button>
        )}
      </form>
    </div>
  );
}

## API Reference

### useAgent(options)

The main hook for building agent interfaces.

#### Options

```typescript
interface UseAgentOptions {
  // Required: API endpoint to call
  api: string;

  // Optional: System prompt for the agent
  system?: string;

  // Optional: Agent mode (default: "base")
  mode?: "flash" | "base" | "max";

  // Optional: Rules for the agent
  rules?: string[];

  // Optional: MCP servers configuration
  mcpServers?: Array<{
    serverName: string;
    serverUrl: string;
  }>;

  // Optional: Agent handoffs for multi-agent flows
  agents?: Array<{
    name: string;
    description?: string;
  }>;

  // Optional: Stream tokens individually
  streamingTokens?: boolean;

  // Optional: Initial messages
  initialMessages?: Message[];

  // Optional: Error callback
  onError?: (error: Error) => void;

  // Optional: Custom headers and body
  headers?: Record<string, string>;
  body?: Record<string, any>;
}
```

#### Returns

```typescript
interface UseAgentReturn {
  // Message history
  messages: Message[];

  // Send a message to the agent
  send: (message: string) => Promise<void>;

  // Stop the current agent run
  stop: () => void;

  // Clear all messages (locally and on server)
  clear: () => Promise<void>;

  // State
  isRunning: boolean;
  error: Error | null;
  session: string | null;
}
```

## Examples

### Basic Chat

```jsx
"use client";

import { useAgent } from "@agentbase-sdk/react";
import { useState } from "react";

function BasicChat() {
  const [input, setInput] = useState("");
  const { messages, send, isRunning } = useAgent({
    api: "/api/agent",
    system: "You are a helpful assistant.",
  });

  return (
    <div>
      {messages.map((msg, idx) => (
        <div key={idx}>
          <strong>{msg.role}:</strong>
          {msg.content.map((item, i) => (
            <div key={i}>
              {item.type === "text" && <span>{item.text}</span>}
            </div>
          ))}
        </div>
      ))}
      <form
        onSubmit={(e) => {
          e.preventDefault();
          if (!input.trim() || isRunning) return;
          send(input);
          setInput("");
        }}
      >
        <input
          value={input}
          onChange={(e) => setInput(e.target.value)}
          disabled={isRunning}
        />
        <button type="submit" disabled={isRunning || !input.trim()}>
          Send
        </button>
      </form>
    </div>
  );
}
```

### Advanced Features

```jsx
"use client";

import { useAgent } from "@agentbase-sdk/react";
import { useState } from "react";

function AdvancedChat() {
  const [input, setInput] = useState("");
  const { messages, send, stop, clear, isRunning, error, session } = useAgent({
    api: "/api/agent",
    system: "You are a helpful assistant.",
    mode: "base",
    onError: (error) => console.error("Error:", error),
  });

  const handleSubmit = (e) => {
    e.preventDefault();
    if (!input.trim() || isRunning) return;
    send(input);
    setInput("");
  };

  return (
    <div>
      {/* Session Info */}
      {session && <div>Session: {session.substring(0, 8)}...</div>}

      {/* Error Display */}
      {error && <div style={{ color: "red" }}>Error: {error.message}</div>}

      {/* Messages */}
      <div>
        {messages.map((msg, idx) => (
          <div key={idx}>
            <strong>{msg.role}:</strong>
            {msg.content.map((item, i) => (
              <div key={i}>
                {item.type === "text" && <div>{item.text}</div>}
                {item.type === "thinking" && (
                  <div style={{ fontStyle: "italic", opacity: 0.7 }}>
                    ðŸ’­ {item.text}
                  </div>
                )}
                {item.type === "tool_use" && (
                  <div>
                    <strong>ðŸ”§ Tool:</strong>
                    <pre>{item.text}</pre>
                  </div>
                )}
              </div>
            ))}
          </div>
        ))}
      </div>

      {/* Controls */}
      <div>
        <button onClick={clear} disabled={messages.length === 0}>
          Clear
        </button>
        {isRunning && <button onClick={stop}>Stop</button>}
      </div>

      {/* Input */}
      <form onSubmit={handleSubmit}>
        <input
          value={input}
          onChange={(e) => setInput(e.target.value)}
          disabled={isRunning}
          placeholder="Type your message..."
        />
        <button type="submit" disabled={isRunning || !input.trim()}>
          Send
        </button>
      </form>
    </div>
  );
}
```

### Multi-Agent Flow

```jsx
"use client";

import { useAgent } from "@agentbase-sdk/react";
import { useState } from "react";

function MultiAgentChat() {
  const [input, setInput] = useState("");
  const { messages, send, isRunning } = useAgent({
    api: "/api/agent",
    system: "You classify products and route to specialized agents.",
    mode: "base",
    agents: [
      {
        name: "Personal Care Agent",
        description: "Handles personal care products",
      },
      {
        name: "Cosmetics Agent",
        description: "Handles makeup and cosmetics",
      },
    ],
  });

  const handleSubmit = (e) => {
    e.preventDefault();
    if (!input.trim() || isRunning) return;
    send(input);
    setInput("");
  };

  return (
    <div>
      {messages.map((msg, idx) => (
        <div key={idx}>
          <strong>{msg.role}:</strong>
          {msg.content.map((item, i) => (
            <div key={i}>
              {item.type === "text" && <div>{item.text}</div>}
              {item.type === "transfer" && (
                <div style={{ background: "#f0f0f0", padding: "8px" }}>
                  ðŸ”„ Transferred to: <strong>{item.agent}</strong>
                  {item.context && <div>Context: {item.context}</div>}
                </div>
              )}
            </div>
          ))}
        </div>
      ))}
      <form onSubmit={handleSubmit}>
        <input
          value={input}
          onChange={(e) => setInput(e.target.value)}
          disabled={isRunning}
          placeholder="Type your message..."
        />
        <button type="submit" disabled={isRunning || !input.trim()}>
          Send
        </button>
      </form>
    </div>
  );
}
```

## Message Structure

Messages have the following structure:

```typescript
interface Message {
  role: "user" | "assistant";
  content: MessageContent;
  createdAt: Date;
}

type MessageContent = MessageContentItem[];

interface MessageContentItem {
  type: "text" | "thinking" | "tool_use" | "tool_response" | "transfer";
  text: string;
  agent?: string; // For transfer events
  context?: string; // For transfer events
}
```

## TypeScript Support

The library is written in TypeScript and includes full type definitions. All types are exported:

```typescript
import type {
  UseAgentOptions,
  UseAgentReturn,
  Message,
  MessageContent,
  MessageContentItem,
  AgentResponse,
} from "@agentbase-sdk/react";
```

## Additional Resources

<CardGroup cols={2}>
  <Card title="NPM Package" icon="npm" href="https://www.npmjs.com/package/@agentbase-sdk/react">
    View the package on NPM
  </Card>

  <Card title="API Reference" icon="code" href="/deploy/api/run-agent">
    Complete API documentation
  </Card>

  <Card title="Use Cases" icon="lightbulb" href="/build/use-cases">
    Implementation examples and use cases
  </Card>

  <Card title="TypeScript SDK" icon="typescript" href="/deploy/sdk/typescript">
    TypeScript SDK for backend integration
  </Card>
</CardGroup>

<Tip>
**Pro Tip**: Use React DevTools to inspect the SDK's state and debug your chat implementations. The SDK exposes helpful debugging information in development mode.
</Tip>