---
title: "Improve Overview"
description: "Optimize, monitor, and improve your AI agents"
icon: "chart-line"
---

## Optimize Your Agents

Once your agents are in production, Agentbase provides tools and insights to help you optimize performance, reduce costs, and improve reliability.

<CardGroup cols={2}>
  <Card title="Cost Tracking" icon="dollar-sign">
    Real-time cost monitoring and optimization strategies to control spending
  </Card>

  <Card title="Performance Metrics" icon="gauge">
    Monitor agent performance, response times, and success rates
  </Card>

  <Card title="Traces & Debugging" icon="bug">
    Deep insights into agent execution for debugging and optimization
  </Card>

  <Card title="Evals & Testing" icon="check-circle">
    Evaluate agent quality and ensure consistent performance
  </Card>
</CardGroup>

## Cost Optimization

Understanding and optimizing costs is crucial for production deployments.

### Cost Breakdown

Agentbase uses a **pay-per-action** pricing model:

| Mode | Cost per Step | Best For |
|------|---------------|----------|
| **Flash** | $0.01 | Simple tasks, quick responses, high volume |
| **Fast** | $0.05 | Most production use cases, balanced performance |
| **Max** | $0.20 | Complex reasoning, critical tasks |

**Each "step"** represents one agent action cycle (reasoning + tool use + response).

### Optimization Strategies

<AccordionGroup>
  <Accordion title="Choose the Right Mode" icon="sliders">
    Match agent mode to task complexity:

    ```typescript
    // Simple query - use Flash
    await agentbase.runAgent({
      message: "What's the current time?",
      mode: "flash"  // $0.01 per step
    });

    // Standard task - use Fast
    await agentbase.runAgent({
      message: "Analyze this CSV and create a summary",
      mode: "fast"  // $0.05 per step
    });

    // Complex reasoning - use Max
    await agentbase.runAgent({
      message: "Design a complete system architecture",
      mode: "max"  // $0.20 per step
    });
    ```

    **Potential savings:** 5-20x by using Flash for simple tasks
  </Accordion>

  <Accordion title="Cache Common Responses" icon="database">
    Cache frequently requested results:

    ```typescript
    const cache = new Map();

    async function runAgentWithCache(message: string) {
      const cacheKey = hashMessage(message);

      if (cache.has(cacheKey)) {
        return cache.get(cacheKey);
      }

      const result = await agentbase.runAgent({
        message,
        mode: "fast"
      });

      cache.set(cacheKey, result);
      return result;
    }
    ```

    **Potential savings:** Up to 90% for repeated queries
  </Accordion>

  <Accordion title="Optimize Prompts" icon="message">
    Reduce steps by being specific and clear:

    ```typescript
    // ❌ Vague prompt - may require multiple steps
    await agentbase.runAgent({
      message: "Check the website",
      mode: "fast"
    });

    // ✅ Specific prompt - completes in fewer steps
    await agentbase.runAgent({
      message: "Visit example.com and extract the pricing table",
      mode: "fast"
    });
    ```

    **Potential savings:** 20-50% fewer steps with clear prompts
  </Accordion>

  <Accordion title="Batch Operations" icon="layer-group">
    Combine multiple tasks when possible:

    ```typescript
    // ❌ Multiple separate requests
    await agentbase.runAgent({
      message: "Analyze file1.csv",
      mode: "fast"
    });
    await agentbase.runAgent({
      message: "Analyze file2.csv",
      mode: "fast"
    });

    // ✅ Single batched request
    await agentbase.runAgent({
      message: "Analyze both file1.csv and file2.csv",
      mode: "fast"
    });
    ```

    **Potential savings:** 30-60% by reducing overhead
  </Accordion>

  <Accordion title="Set Budget Limits" icon="dollar">
    Implement cost controls in your application:

    ```typescript
    const DAILY_BUDGET = 50; // $50 per day

    async function runAgentWithBudget(message: string) {
      const todayCost = await getDailyCost();

      if (todayCost >= DAILY_BUDGET) {
        throw new Error('Daily budget exceeded');
      }

      return await agentbase.runAgent({
        message,
        mode: "fast"
      });
    }
    ```
  </Accordion>
</AccordionGroup>

<Card title="Cost Tracking Guide" icon="dollar" href="/improve/cost-tracking">
  Learn more about monitoring and optimizing costs
</Card>

## Performance Monitoring

Track and improve agent performance in production.

### Key Metrics

<CardGroup cols={3}>
  <Card title="Response Time" icon="clock">
    Time from request to completion

    **Target:** < 10s for most tasks
  </Card>

  <Card title="Success Rate" icon="check">
    Percentage of successful completions

    **Target:** > 95%
  </Card>

  <Card title="Steps per Task" icon="list">
    Average steps to complete tasks

    **Target:** Minimize while maintaining quality
  </Card>
</CardGroup>

### Monitoring Implementation

```typescript
import { createLogger } from './logger';

const logger = createLogger();

async function monitoredRunAgent(message: string, mode: string) {
  const startTime = Date.now();

  try {
    logger.info('Agent started', { message, mode });

    const result = await agentbase.runAgent({
      message,
      mode,
      stream: true
    });

    let steps = 0;
    for await (const event of result) {
      if (event.type === 'agent_step') {
        steps++;
      }
    }

    const duration = Date.now() - startTime;

    logger.info('Agent completed', {
      message,
      mode,
      duration,
      steps,
      cost: result.cost
    });

    return result;
  } catch (error) {
    const duration = Date.now() - startTime;

    logger.error('Agent failed', {
      message,
      mode,
      duration,
      error: error.message
    });

    throw error;
  }
}
```

<Card title="Performance Guide" icon="gauge" href="/improve/performance">
  Learn more about performance optimization
</Card>

## Debugging with Traces

Agentbase provides detailed traces of agent execution for debugging and optimization.

### What Traces Show

- Every tool the agent used
- Input and output for each step
- Time spent on each operation
- Costs per step
- Error messages and stack traces

### Accessing Traces

<Tabs>
  <Tab title="Event Streaming">
    Stream events in real-time:

    ```typescript
    const result = await agentbase.runAgent({
      message: "Debug this issue",
      mode: "fast",
      stream: true
    });

    for await (const event of result) {
      console.log('Event:', event.type);
      console.log('Data:', event.content);
    }
    ```
  </Tab>

  <Tab title="Dashboard">
    View traces in your [dashboard](https://base.agentbase.sh):
    - See complete execution history
    - Filter by session or time
    - Download trace data
    - Share with team members
  </Tab>
</Tabs>

<Card title="Traces Guide" icon="bug" href="/improve/traces">
  Learn more about debugging with traces
</Card>

## Quality Assurance with Evals

Ensure consistent agent quality with evaluations and testing.

### Eval Strategies

<AccordionGroup>
  <Accordion title="Unit Tests for Agents" icon="vial">
    Test specific agent capabilities:

    ```typescript
    describe('Agent Capabilities', () => {
      it('should extract data from CSV', async () => {
        const result = await agentbase.runAgent({
          message: "Extract the first row from data.csv",
          mode: "fast"
        });

        expect(result.content).toContain('header1,header2');
      });

      it('should handle errors gracefully', async () => {
        const result = await agentbase.runAgent({
          message: "Read nonexistent.csv",
          mode: "fast"
        });

        expect(result.content).toContain('not found');
      });
    });
    ```
  </Accordion>

  <Accordion title="Integration Tests" icon="puzzle-piece">
    Test end-to-end workflows:

    ```typescript
    it('should complete multi-step workflow', async () => {
      // Step 1: Create file
      const result1 = await agentbase.runAgent({
        message: "Create data.json with sample data",
        mode: "fast"
      });

      // Step 2: Process file
      const result2 = await agentbase.runAgent({
        message: "Read data.json and calculate totals",
        session: result1.session,
        mode: "fast"
      });

      expect(result2.content).toMatch(/total: \d+/);
    });
    ```
  </Accordion>

  <Accordion title="Performance Benchmarks" icon="stopwatch">
    Track performance over time:

    ```typescript
    const benchmarks = {
      'simple-query': { maxSteps: 2, maxTime: 3000 },
      'data-processing': { maxSteps: 5, maxTime: 10000 },
      'web-scraping': { maxSteps: 8, maxTime: 15000 }
    };

    async function benchmarkAgent(task: string, expected: any) {
      const startTime = Date.now();
      let steps = 0;

      const result = await agentbase.runAgent({
        message: task,
        mode: "fast",
        stream: true
      });

      for await (const event of result) {
        if (event.type === 'agent_step') steps++;
      }

      const duration = Date.now() - startTime;

      expect(steps).toBeLessThanOrEqual(expected.maxSteps);
      expect(duration).toBeLessThanOrEqual(expected.maxTime);
    }
    ```
  </Accordion>

  <Accordion title="Quality Metrics" icon="star">
    Measure output quality:

    ```typescript
    async function evaluateQuality(task: string, expectedCriteria: string[]) {
      const result = await agentbase.runAgent({
        message: task,
        mode: "fast"
      });

      const evaluation = await agentbase.runAgent({
        message: `Evaluate this response against criteria: ${expectedCriteria.join(', ')}\n\nResponse: ${result.content}`,
        mode: "fast"
      });

      // Parse and assert quality metrics
      expect(evaluation.score).toBeGreaterThan(0.8);
    }
    ```
  </Accordion>
</AccordionGroup>

<Card title="Evals Guide" icon="check-circle" href="/improve/evals">
  Learn more about agent evaluation strategies
</Card>

## Next Steps

<CardGroup cols={2}>
  <Card title="Cost Tracking" icon="dollar" href="/improve/cost-tracking">
    Monitor and optimize agent costs
  </Card>

  <Card title="Performance" icon="gauge" href="/improve/performance">
    Improve agent speed and efficiency
  </Card>

  <Card title="Traces" icon="bug" href="/improve/traces">
    Debug agents with execution traces
  </Card>

  <Card title="Evals" icon="check-circle" href="/improve/evals">
    Ensure consistent agent quality
  </Card>
</CardGroup>
